
%%%% Prepare the Latex environment;
%%%% For Chinese Environment;

%\documentclass[12pt,oneside,a4paper]{article}
\documentclass[12pt,oneside,a4paper]{book}


%%%% Load Common Package;
\usepackage{xltxtra, fontspec, xunicode}				%% Fonts;
\usepackage[slantfont, boldfont]{xeCJK}					%% Allow Italics and Boldface;
\usepackage{mathptmx}									%% Times New Roman in Mathematical Formulas;
\usepackage{latexsym, amsmath, amssymb, amsthm}			%% Mathematical Equations;
\usepackage{tabu, graphicx, multicol, multirow}			%% Add Table and Pictures;
\usepackage{subfigure, epsfig}							%% Add figures;
\usepackage{bm, color}									%% The bold Characters and Add Color; 
\usepackage{enumerate}									%% Sort;
\usepackage{listings}									%% Add Code Environment;
\usepackage{algorithm, algorithmic}						%% the Environment of Algorithm;

\usepackage{fancyhdr}									%% Define the hander and footer by yourself;
\usepackage{indentfirst}								%% Indentation at the beginning of a line;
\usepackage{extarrows, chemarrow}						%% Allow text above or under the arrow and the equal sign;

\usepackage[colorlinks, linkcolor=black, anchorcolor=black, citecolor=black]{hyperref}	%%% Hyperlinks;
\usepackage[top=24mm, bottom=24mm, left=35mm, right=28mm]{geometry}		%%% More Flexible Interface;

%%%% Plot directly in tikz environment;
\usepackage{tikz}
\usetikzlibrary{arrows, shapes, chains}

%%%% Choose English Fonts;
\setmainfont{Times New Roman}


%%%% Set the Algorithm Environment;
\floatname{algorithm}{\textbf{算法.}}
\renewcommand{\algorithmicrequire}{\textbf{输入:}}		%% Use Input in the format of Algorithm;
\renewcommand{\algorithmicensure}{\textbf{输出:}}		%% Use Output in the format of Algorithm;


%%%% Set the Code Environment;
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstset{
    breaklines=true,    
    captionpos=b,
    numbersep=5pt,
    showspaces=false,
    showtabs=false,
    tabsize=4,
    columns=fixed,       
    basicstyle=\footnotesize,
    breakatwhitespace=false,
	escapeinside=‘’,								%% Display Chinese in ‘’;
    numbers=left,                                   %% Display the line number on the left;
    keepspaces=false,                               %% Additional blank line if it's 'true';
    frame=shadowbox,                                %% the Frame;
    backgroundcolor=\color{backcolour},             %% Set the color of the background;
    commentstyle=\color{codegreen},                 %% Set the format of the Code Comments;
    keywordstyle=\color{magenta},                   %% Set the color of the key words;
    numberstyle=\tiny\color{codegray},              %% Set the format of the line number;
    stringstyle=\color{codepurple},                 %% Set the format of the string;
    showstringspaces=false,                         %% Don't display the blank between strings;
    language=C++                                    %% Set Language;
}


%%%% Define Environment for Proof;
\newenvironment{blackbox}[1][~~~~]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\ep\end{trivlist}}
\renewenvironment{proof}[1][证明.]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\ep\end{trivlist}}
%%% For Proof Environment;
\newcommand{\ep}{\hfill\rule{0.15cm}{0.35cm}\vskip 0.3cm}


%%%% Define Environments for different cases;
%\newtheorem{theorem}{\textbf{定理}}[chapter]
%\newtheorem{assumption}{\textbf{假设}}[chapter]
%\newtheorem{definition}{\textbf{定义}}[chapter]
%\newtheorem{corollary}{\textbf{推论}}[chapter]
%\newtheorem{lemma}{\textbf{引理}}[chapter]
%\newtheorem{axiom}{\textbf{公理}}[chapter]
%\newtheorem{example}{\textbf{例}}[chapter]
%\newtheorem{proposition}{\textbf{命题}}[chapter]
%\newtheorem{property}{\textbf{性质}}[chapter]
%\newtheorem{remark}{\textbf{注}}[chapter]
%\newtheorem{exercise}{\textbf{练习}}[chapter]
%\newtheorem{question}{\textbf{问题}}[chapter]
%\newtheorem{conjecture}{\textbf{猜想}}[chapter]


%%%% Define Environments by yourself;
\usepackage{empheq}			%%% More Beautiful Equation Environments;
\usepackage[framemethod=tikz]{mdframed}

\definecolor{ocre}{RGB}{243,102,25}
\definecolor{mygray}{RGB}{243,243,244}
\newcommand*\mymathbox[1]{%
	\fcolorbox{ocre}{mygray}{\hspace{1em}#1\hspace{1em}}}

%%%% Change Backgroundcolor and Linecolor by yourself;
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{theorem}{\textbf{定理}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{assumption}{\textbf{假设}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{definition}{\textbf{定义}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{corollary}{\textbf{推论}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{lemma}{\textbf{引理}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{axiom}{\textbf{公理}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{example}{\textbf{例}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{proposition}{\textbf{命题}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{property}{\textbf{性质}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{remark}{\textbf{注}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{exercise}{\textbf{练习}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{question}{\textbf{问题}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{conjecture}{\textbf{猜想}}[chapter]
\newmdtheoremenv[backgroundcolor=mygray, linecolor=ocre, leftmargin=20pt, innerleftmargin=0pt, innerrightmargin=0pt,
	]{strategy}{\textbf{策略}}[chapter]


%%%% The Chinese name of abstract in the article;
%\renewcommand{\abstractname}{摘要}

\renewcommand\contentsname{目\hspace{1em}录}
\renewcommand\listfigurename{图\hspace{1em}目\hspace{1em}录}
\renewcommand\listtablename{表\hspace{1em}目\hspace{1em}录}
\newcommand\listequationname{公式索引}
\newcommand\equationname{公式}
\renewcommand\bibname{参考文献}
\renewcommand\indexname{索引}
\renewcommand\figurename{图}
\renewcommand\tablename{表}
\renewcommand\appendixname{附录}


\usepackage{Prepare/titlesec}
\usepackage{Prepare/titletoc}
\usepackage{Prepare/xCJKnumb}
%-------------------------------------------
% Change Chapter 1 into 第一章
\titleformat{\chapter}{\centering\huge}{第\,\xCJKnumber{\thechapter}\,章}{1em} {}
%\titleformat{\chapter}{\centering\Huge\bfseries}{第\,\xCJKnumber{\thechapter}\,章}{1em} {}
%\titleformat{\chapter}{\centering\Huge\bfseries}{第\,\thechapter{}\,章}{1em} {}
%\renewcommand\chaptername{第\xCJKnumber{\arabic{chapter}}章}

%\titleformat{\chapter}{\centering\huge}{第\thechapter{}章}{1em}{\textbf}
%\titleformat{\section}{\centering\sihao}{\thesection}{1em}{\textbf}
%\titleformat{\subsection}{\xiaosi}{\thesubsection}{1em}{\textbf}
%\titleformat{\subsubsection}{\xiaosi}{\thesubsubsection}{1em}{\textbf}

%%% Directory in Contents;
\titlecontents{chapter}[0em]{}{\makebox[4.1em][l]{第\xCJKnumber{\thecontentslabel}章}}{}{\titlerule*[0.7pc]{.}\contentspage}


%------------------------------------------------------
%%%% Set Chinese Fonts;
\setCJKmainfont[BoldFont=Adobe Heiti Std,ItalicFont=Adobe Kaiti Std]{Adobe Song Std}
\setCJKsansfont{Adobe Kaiti Std}
\setCJKmonofont{Adobe Fangsong Std}
 
%%% Alias;
\setCJKfamilyfont{zhsong}{Adobe Song Std}
\setCJKfamilyfont{zhhei}{Adobe Heiti Std}
\setCJKfamilyfont{zhfs}{Adobe Fangsong Std}
\setCJKfamilyfont{zhkai}{Adobe Kaiti Std}
 
\newcommand*{\songti}{\CJKfamily{zhsong}} % 宋体
\newcommand*{\heiti}{\CJKfamily{zhhei}}   % 黑体
\newcommand*{\kaishu}{\CJKfamily{zhkai}}  % 楷书
\newcommand*{\fangsong}{\CJKfamily{zhfs}} % 仿宋

%---------------------------------------------
%%% Set size of these Chinese fonts;
\newcommand{\chuhao}{\fontsize{42pt}{\baselineskip}\selectfont}
\newcommand{\xiaochuhao}{\fontsize{36pt}{\baselineskip}\selectfont}
\newcommand{\yihao}{\fontsize{28pt}{\baselineskip}\selectfont}
\newcommand{\xiaoyihao}{\fontsize{22pt}{\baselineskip}\selectfont}
\newcommand{\erhao}{\fontsize{21pt}{\baselineskip}\selectfont}
\newcommand{\xiaoerhao}{\fontsize{18pt}{\baselineskip}\selectfont}
\newcommand{\sanhao}{\fontsize{15.75pt}{\baselineskip}\selectfont}
\newcommand{\sihao}{\fontsize{14pt}{\baselineskip}\selectfont}
\newcommand{\xiaosihao}{\fontsize{12pt}{\baselineskip}\selectfont}
\newcommand{\wuhao}{\fontsize{10.5pt}{\baselineskip}\selectfont}
\newcommand{\xiaowuhao}{\fontsize{9pt}{\baselineskip}\selectfont}
\newcommand{\liuhao}{\fontsize{7.875pt}{\baselineskip}\selectfont}
\newcommand{\qihao}{\fontsize{5.25pt}{\baselineskip}\selectfont}


%%%% Overall Arrangement;
\headsep=4mm\headheight=6mm\topmargin=-10pt
\oddsidemargin=0pt\evensidemargin=0pt
\textheight=225truemm\textwidth=160truemm


%%%% Section Number;
\numberwithin{equation}{chapter}

\renewcommand{\theequation}{\thechapter.\arabic{equation}}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

%%% Roman;
\newcommand{\rmnum}[1]{\romannumeral #1}							%% Lowercase Roman numerals; 
\newcommand{\Rmnum}[1]{\uppercase\expandafter{\romannumeral #1}}	%% Uppercase Roman numerals;

%%% Adjust table height;
\usepackage{array}
\renewcommand\arraystretch{1.5}		%%% 1.5 times of the default;


%%%-------------------------------------------------------------%
\setlength{\parindent}{2em}

%%% More Beautiful in handling Chinese breaking line;
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt

%------------------------------------------------------------%
\setlength{\baselineskip}{20pt plus2pt minus1pt} % Adjust the natural spacing;


%%%% Set the watermark and the wallpaper;
\usepackage[placement=top, angle=0, color=black!40, scale=3, hshift=75, vshift=-10]{background}
\backgroundsetup{contents={JK}, color=lightgray}
\usepackage{wallpaper}
%\ULCornerWallPaper{0.2}{./Links/Dragon.png}
%%% The color of background;
%\definecolor{MySkyBlue}{RGB}{187,255,255}
%\pagecolor{MySkyBlue}


